#!/bin/bash
# æ›´æ–°ä¸º networkservice è‡ªåŠ¨è·å–æ´»åŠ¨é“¾æ¥

# è‹¥å‘½ä»¤å¤±è´¥è®©è„šæœ¬é€€å‡º 
set -o errexit
# è‹¥æœªè®¾ç½®çš„å˜é‡è¢«ä½¿ç”¨è®©è„šæœ¬é€€å‡º 
set -o nounset

# è®¾ç½®ç¯å¢ƒå˜é‡
PATH=$PATH:/usr/local/bin/:/opt/homebrew/bin:~/.user_shell_scripts

# è®¾ç½® IPï¼Œ å­ç½‘ï¼Œ ä¸‹ä¸€è·³è·¯ç”±
net_ip="192.168.0.3 255.255.225.0 192.168.0.2"
net_dns="192.168.0.2"

# è·å–æ´»åŠ¨è¿æ¥
networkservice | cut -d',' -f1 | while read -r i; do 
  # è®¾ç½®ç½‘ç»œæœåŠ¡çš„ IPï¼Œ å­ç½‘ï¼Œ ä¸‹ä¸€è·³è·¯ç”±
  if [ "$i" = "USB 10/100/1000 LAN" ]; then
      networksetup -setmanual "$i" $net_ip;
      # è®¾ç½® dns
      networksetup -setdnsservers "$i" $net_dns ;
  fi
  if [ "$i" = "Wi-Fi" ]; then
      networksetup -setmanual "$i" $net_ip;
      # è®¾ç½® dns
      networksetup -setdnsservers "$i" $net_dns;
  fi
done

# é€šçŸ¥
osascript -e 'display notification "networksetup" with title "ğŸ—¼ç½‘ç»œæœåŠ¡ IP å·²ä¿®æ”¹!" sound name "Glass"'

exit