#!/bin/bash
# è‹¥å‘½ä»¤å¤±è´¥è®©è„šæœ¬é€€å‡º 
set -o errexit

# è®¾ç½®ç¯å¢ƒå˜é‡
PATH=$PATH:/usr/local/bin/
# è®¾ç½®ä»£ç†
export https_proxy=http://127.0.0.1:1080 http_proxy=http://127.0.0.1:1080 all_proxy=socks5://127.0.0.1:1080
# è®¾ç½®æºè·¯å¾„
sourcepath=~/Pictures/å†™çœŸ
# è®¾ç½®ç›®æ ‡è·¯å¾„
destpath="å›¾ç‰‡åº“/å£çº¸/å†™çœŸå£çº¸"
# è®¾ç½®æ—¥å¿—è·¯å¾„
logspath="/Users/$USER/Library/Logs/Rclone/rclone_å†™çœŸå£çº¸.log"

# é€šçŸ¥
osascript -e 'display notification "rclone converter" with title "ğŸŒ¥ å†™çœŸ ğŸ”œ Onedrive å¼€å§‹åŒæ­¥" sound name "Glass"'

# åŒæ­¥"å†™çœŸ"æ–‡ä»¶å¤¹å†…å®¹åˆ°"onedrive",æ’é™¤ 'DS_Store'
rclone sync "$sourcepath" "onedrive:$destpath" -P --log-file "$logspath" --log-level INFO --exclude ".DS_Store"

# é€šçŸ¥
osascript -e 'display notification "Rclone converter" with title "ğŸŒ¥ å†™çœŸ åŒæ­¥å®Œæˆ" sound name "Glass"'

exit 0